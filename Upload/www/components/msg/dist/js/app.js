(function(e){function t(t){for(var i,a,c=t[0],l=t[1],o=t[2],p=0,d=[];p<c.length;p++)a=c[p],Object.prototype.hasOwnProperty.call(n,a)&&n[a]&&d.push(n[a][0]),n[a]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);u&&u(t);while(d.length)d.shift()();return r.push.apply(r,o||[]),s()}function s(){for(var e,t=0;t<r.length;t++){for(var s=r[t],i=!0,c=1;c<s.length;c++){var l=s[c];0!==n[l]&&(i=!1)}i&&(r.splice(t--,1),e=a(a.s=s[0]))}return e}var i={},n={app:0},r=[];function a(t){if(i[t])return i[t].exports;var s=i[t]={i:t,l:!1,exports:{}};return e[t].call(s.exports,s,s.exports,a),s.l=!0,s.exports}a.m=e,a.c=i,a.d=function(e,t,s){a.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},a.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},a.t=function(e,t){if(1&t&&(e=a(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)a.d(s,i,function(t){return e[t]}.bind(null,i));return s},a.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return a.d(t,"a",t),t},a.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},a.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var o=0;o<c.length;o++)t(c[o]);var u=l;r.push([0,"chunk-vendors"]),s()})({0:function(e,t,s){e.exports=s("56d7")},"18f7":function(e,t,s){"use strict";var i=s("acd9"),n=s.n(i);n.a},"56d7":function(e,t,s){"use strict";s.r(t);s("cadf"),s("551c"),s("f751"),s("097d");var i=s("2b0e"),n=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex",attrs:{id:"app"}},[s("div",{directives:[{name:"show",rawName:"v-show",value:e.errorMsg,expression:"errorMsg"}],staticClass:"callout callout-danger",attrs:{id:"msg-error"}},[e._v("\n    "+e._s(e.errorMsg)+"\n  ")]),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show.list,expression:"show.list"}],staticClass:"list flex-row",class:{height_35:e.show.preview}},[s("Folders",{attrs:{folders:e.folders}}),s("Messages",{attrs:{messages:e.messages}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show.preview,expression:"show.preview"}],staticClass:"preview flex-row"},[s("Bar"),s("Message",{attrs:{message:e.message}})],1),s("div",{directives:[{name:"show",rawName:"v-show",value:e.show.form,expression:"show.form"}]},[s("Form")],1)])},r=[],a=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"folders flex-2"},[s("ul",e._l(e.folders,(function(t,i){return s("li",{key:i},[s("button",{class:{"btn btn-blau":"Posteingang"==t.folderName,"btn btn-gruen":"Gesendete"==t.folderName," btn-info":"Archiv"==t.folderName," btn-danger":"Papierkorb"==t.folderName,"btn btn-grau":0==t.isStandardFolder},on:{click:function(s){return e.clickHandler(t)}}},[e._v("\n        "+e._s(t.folderName)+"\n      ")])])})),0)])},c=[],l={name:"Folders",props:{folders:Object},created:function(){EventBus.$emit("folders--get",{})},methods:{clickHandler:function(e){EventBus.$emit("messages--changeFolder",{folder:e})}}},o=l,u=s("2877"),p=Object(u["a"])(o,a,c,!1,null,"ae1134f8",null),d=p.exports,m=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"messages flex-10"},[s("div",{staticClass:"toolbar flex-row"},[s("div",{staticClass:"flex-9"},[s("button",{staticClass:"btn btn-blau",on:{click:function(t){return e.clickHandler()}}},[e._v("Neue Nachricht")])]),s("form",{staticClass:"3",attrs:{id:"search"}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.searchQuery,expression:"searchQuery"}],attrs:{type:"search",name:"query"},domProps:{value:e.searchQuery},on:{input:function(t){t.target.composing||(e.searchQuery=t.target.value)}}})])]),s("GridTemplate",{attrs:{list:e.messages,columns:e.gridColumns,columsHeader:e.gridColumnsHeader,"filter-key":e.searchQuery}})],1)},f=[],h=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"gridtemplate"},[s("table",{staticClass:"noselect"},[s("thead",[s("tr",e._l(e.columns,(function(t,i){return s("td",{key:i,class:{active:e.sortKey==t},on:{click:function(s){return e.sortBy(t)}}},[e._v("\n          "+e._s(e.columsHeader[i])+"\n          "),s("i",{staticClass:"fa ",class:{"fa-sort-down":1==e.sortOrders[t],"fa-sort-up":-1==e.sortOrders[t]}})])})),0)]),s("tbody",e._l(e.filteredlist,(function(t,i){return s("tr",{key:i},e._l(e.columns,(function(i,n){return s("td",{key:n},["isRead"==i&&1==t[i]?s("i",{}):"isRead"==i&&0==t[i]?s("i",{staticClass:"fa fa-envelope-o"}):"priority"==i&&"NORMAL"==t[i]?s("i",{}):"priority"==i&&"HIGH"==t[i]?s("i",{staticClass:"fa fa-arrow-up text-red"}):"priority"==i&&"LOW"==t[i]?s("i",{staticClass:"fa fa-arrow-down text-green"}):"hasAttachment"==i&&t[i]?s("i",{staticClass:"fa fa-file-o"}):"hasAttachment"==i&&""==t[i]?s("i",{}):s("span",{on:{click:function(s){return e.clickHandler(t,s)}}},[e._v("\n            "+e._s(t[i])+"\n          ")])])})),0)})),0)])])},v=[],g=(s("55dd"),s("ac6a"),s("456d"),{name:"GridTemplate",template:"#grid-template",props:{list:Array,columns:Array,columsHeader:Array,filterKey:String},data:function(){return{sortKey:"",sortOrders:{},clickHandlerList:[],clickHandlerNode:!1}},computed:{filteredlist:function(){var e=this.filterKey&&this.filterKey.toLowerCase(),t=parseInt(this.sortOrders[this.sortKey])||1,s=this.list;e&&(s=s.filter((function(t){return Object.keys(t).some((function(s){return String(t[s]).toLowerCase().indexOf(e)>-1}))})));var i=this;return s&&(s=s.slice().sort((function(e,s){return"timeFormat"==i.sortKey?(e=e["messageTime"],s=s["messageTime"]):(e=e[i.sortKey],s=s[i.sortKey]),(e===s?0:e>s?1:-1)*t}))),s}},filters:{capitalize:function(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}},methods:{clickHandler:function(e,t){if(!e)return!1;this.clickHandlerList=[e],EventBus.$emit("message--open",{message:this.clickHandlerList[0]}),this.clickHandlerNode&&this.clickHandlerNode.classList.remove("text-red"),this.clickHandlerNode=t.target.parentNode.parentNode,this.clickHandlerNode.classList.add("text-red")},sortBy:function(e){if(!e)return!1;this.sortKey=e;var t=parseInt(this.sortOrders[this.sortKey])||1;this.sortKey in this.sortOrders?this.$set(this.sortOrders,this.sortKey,-1*t):(this.sortOrders={},this.$set(this.sortOrders,this.sortKey,1))}}}),b=g,y=(s("18f7"),Object(u["a"])(b,h,v,!1,null,"06fc326e",null)),C=y.exports,k={name:"Messages",components:{GridTemplate:C},props:{messages:Array},data:function(){return{searchQuery:"",gridColumns:["hasAttachment","priority","isRead","subject","senderConnect","timeFormat"],gridColumnsHeader:["","","","Betreff","Sender","Datum"]}},created:function(){},methods:{clickHandler:function(){EventBus.$emit("message--form",{})}}},w=k,x=Object(u["a"])(w,m,f,!1,null,"31f16994",null),R=x.exports,_=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"message flex flex-10"},[e.message.id?s("div",{staticClass:"head"},[s("div",[s("label",[e._v("Von")]),e._v(e._s(e.message.senderConnect))]),s("div",[s("label",[e._v("Datum")]),e._v(e._s(e.message.timeFormat))]),s("div",[s("label",[e._v("Betreff")]),"HIGH"==e.message.priority?s("span",{staticClass:"text-red"},[s("i",{staticClass:"fa fa-arrow-up"}),e._v("\n        Wichtig:\n      ")]):"LOW"==e.message.priority?s("i",{staticClass:"fa fa-arrow-down text-green"}):e._e(),e._v("\n      "+e._s(e.message.subject)+"\n    "),s("div",[e.message.hasAttachment?s("div",[s("label",[e._v("Anhang")]),s("i",{staticClass:"fa fa-file-o"}),e._v("\n      "+e._s(e.message.hasAttachment)+"\n    ")]):e._e()]),e.message.id?s("div",{staticClass:"body",domProps:{innerHTML:e._s(e.message.text)}}):e._e()])]):e._e()])},H=[],S={name:"Message",props:{message:Object}},O=S,A=Object(u["a"])(O,_,H,!1,null,"1e801ffc",null),F=A.exports,j=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"bar flex-2"},[e._v("\n  Bar:\n  "),s("ul",[s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Antworten\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Allen Antworten\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Weiterleiten\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Verschieben\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Archivieren\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Drucken (PDF)\n      ")])]),s("li",[s("button",{staticClass:"btn-primary",on:{click:function(t){return e.clickHandler()}}},[e._v("\n        Löschen\n      ")])])])])},B=[],N={name:"Bar",props:{}},T=N,M=Object(u["a"])(T,j,B,!1,null,"65965b8e",null),L=M.exports,E=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"form flex-9"},[s("form",{ref:"form",attrs:{action:"index.php?page=MessageCompose&action=send",method:"post",enctype:"multipart/form-data",id:"composeForm"},on:{submit:e.checkForm}},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageRecipients,expression:"messageRecipients"}],attrs:{type:"hidden",name:"recipients"},domProps:{value:e.messageRecipients},on:{input:function(t){t.target.composing||(e.messageRecipients=t.target.value)}}}),s("input",{attrs:{type:"hidden",name:"ccrecipients",value:""}}),s("input",{attrs:{type:"hidden",name:"bccrecipients",value:""}}),s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageSubject,expression:"messageSubject"}],attrs:{type:"hidden",name:"messageSubject"},domProps:{value:e.messageSubject},on:{input:function(t){t.target.composing||(e.messageSubject=t.target.value)}}}),s("input",{attrs:{type:"hidden",name:"messageText",value:""}}),s("input",{attrs:{type:"hidden",name:"priority",value:""}}),s("input",{attrs:{type:"hidden",name:"attachments",value:""}}),s("input",{attrs:{type:"hidden",name:"questions",value:""}}),s("input",{attrs:{type:"hidden",name:"readConfirmation",value:""}}),s("input",{attrs:{type:"hidden",name:"forwardMessage",value:""}}),s("input",{attrs:{type:"hidden",name:"replyMessage",value:""}}),s("input",{attrs:{type:"hidden",name:"replyAllMessage",value:""}}),s("input",{attrs:{type:"hidden",name:"dontAllowAnser",value:""}}),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageText,expression:"messageText"}],staticClass:"hidden",attrs:{name:"messageText"},domProps:{value:e.messageText},on:{input:function(t){t.target.composing||(e.messageText=t.target.value)}}})]),s("div",{staticClass:"bar margin-b-l"},[s("button",{staticClass:"btn btn-grau margin-r-xs",on:{click:function(t){return e.clickHandlerCloseForm()}}},[s("i",{staticClass:"fa fa-arrow-left"})]),s("button",{staticClass:"btn btn-grau margin-r-xs",on:{click:function(t){return e.clickHandlerClearForm()}}},[e._v("Abbrechen")]),s("button",{staticClass:"btn btn-blau margin-r-xs",on:{click:function(t){return e.clickHandlerSubmitForm()}}},[s("i",{staticClass:"fa fa-paper-plane"}),e._v("Senden")])]),s("ul",{staticClass:"margin-b-m"},[s("li",{staticClass:"flex-row margin-b-s"},[s("label",{staticClass:"flex-1"},[e._v("Empfänger:")]),s("div",{staticClass:"flex-6 flex-row"},[s("FormRecipient",{directives:[{name:"show",rawName:"v-show",value:e.openRecipients,expression:"openRecipients"}],attrs:{type:"recipients"}}),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.openRecipients,expression:"!openRecipients"}],staticClass:"btn btn-grau margin-r-s",on:{click:function(t){return e.clickHandlerRecipients()}}},[s("i",{staticClass:"fa fa-plus"})]),s("ul",{directives:[{name:"show",rawName:"v-show",value:!e.openRecipients,expression:"!openRecipients"}]},e._l(e.messageRecipientsArray,(function(t,i){return s("li",{key:i},[e._v(e._s(t.name))])})),0)],1)]),s("li",{staticClass:"flex-row margin-b-s"},[s("label",{staticClass:"flex-1"},[e._v("Kopieempfänger cc:")]),s("div",{staticClass:"flex-6 flex-row"},[s("FormRecipient",{directives:[{name:"show",rawName:"v-show",value:e.openCcRecipients,expression:"openCcRecipients"}],attrs:{type:"ccrecipients"}}),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.openCcRecipients,expression:"!openCcRecipients"}],staticClass:"btn btn-grau margin-r-s",on:{click:function(t){return e.clickHandlerCcRecipients()}}},[s("i",{staticClass:"fa fa-plus"})]),s("ul",{directives:[{name:"show",rawName:"v-show",value:!e.openCcRecipients,expression:"!openCcRecipients"}]},e._l(e.messageCcRecipientsArray,(function(t,i){return s("li",{key:i},[e._v(e._s(t.name))])})),0)],1)]),s("li",{staticClass:"flex-row margin-b-s"},[s("label",{staticClass:"flex-1"},[e._v("Verdeckte Kopieempfänger bcc:")]),s("div",{staticClass:"flex-6 flex-row"},[s("FormRecipient",{directives:[{name:"show",rawName:"v-show",value:e.openBccRecipients,expression:"openBccRecipients"}],attrs:{type:"bccrecipients"}}),s("button",{directives:[{name:"show",rawName:"v-show",value:!e.openBccRecipients,expression:"!openBccRecipients"}],staticClass:"btn btn-grau margin-r-s",on:{click:function(t){return e.clickHandlerBccRecipients()}}},[s("i",{staticClass:"fa fa-plus"})]),s("ul",{directives:[{name:"show",rawName:"v-show",value:!e.openBccRecipients,expression:"!openBccRecipients"}]},e._l(e.messageBccRecipientsArray,(function(t,i){return s("li",{key:i},[e._v(e._s(t.name))])})),0)],1)])]),s("ul",[s("li",{staticClass:"flex-row margin-b-m"},[s("label",{staticClass:"flex-1"},[e._v("Betreff:")]),s("input",{directives:[{name:"model",rawName:"v-model",value:e.messageSubject,expression:"messageSubject"}],staticClass:"flex-6",attrs:{type:"text"},domProps:{value:e.messageSubject},on:{input:function(t){t.target.composing||(e.messageSubject=t.target.value)}}})]),s("li",{staticClass:"flex-row"},[s("label",{staticClass:"flex-1"},[e._v("Nachricht:")]),s("textarea",{directives:[{name:"model",rawName:"v-model",value:e.messageText,expression:"messageText"}],staticClass:"flex-6",domProps:{value:e.messageText},on:{input:function(t){t.target.composing||(e.messageText=t.target.value)}}})])])])},K=[],$=function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"flex-1 bg-white form-recipients flex-row height_35 border-radius"},[s("div",{staticClass:"flex-1 flex border-r scroll"},[s("button",{staticClass:"btn chevron",class:e.isTabActive("tab-1"),on:{click:function(t){return e.clickHandlerRecipientsTabOpen("tab-1")}}},[e._v("Allgemein")]),s("button",{staticClass:"btn chevron",class:e.isTabActive("tab-2"),on:{click:function(t){return e.clickHandlerRecipientsTabOpen("tab-2")}}},[e._v("Lehrer")]),s("button",{staticClass:"btn chevron",class:e.isTabActive("tab-3"),on:{click:function(t){return e.clickHandlerRecipientsTabOpen("tab-3")}}},[e._v("Schüler")]),s("button",{staticClass:"btn"},[e._v("Eltern")])]),s("div",{staticClass:"flex-1 border-r"},[s("div",{directives:[{name:"show",rawName:"v-show",value:"tab-1"==e.recipientsTabOpen,expression:"recipientsTabOpen == 'tab-1'"}],staticClass:"tab flex scroll"},[s("button",{staticClass:"btn",class:e.isRecipientSelected({key:"SL"}),on:{click:function(t){return e.clickHandlerRecipientsSelect({key:"SL",name:"Schulleitung"})}}},[e._v("Schulleitung")]),s("button",{staticClass:"btn",class:e.isRecipientSelected({key:"PR"}),on:{click:function(t){return e.clickHandlerRecipientsSelect({key:"PR",name:"Personalrat"})}}},[e._v("Personalrat")]),s("button",{staticClass:"btn",class:e.isRecipientSelected({key:"VW"}),on:{click:function(t){return e.clickHandlerRecipientsSelect({key:"VW",name:"Verwaltung"})}}},[e._v("Verwaltung")]),s("button",{staticClass:"btn",class:e.isRecipientSelected({key:"HM"}),on:{click:function(t){return e.clickHandlerRecipientsSelect({key:"HM",name:"Hausmeister"})}}},[e._v("Hausmeister")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"tab-2"==e.recipientsTabOpen,expression:"recipientsTabOpen == 'tab-2'"}],staticClass:"tab flex scroll"},[s("button",{staticClass:"btn",class:e.isRecipientSelected({key:"all_teacher"}),on:{click:function(t){return e.clickHandlerRecipientsSelect({key:"all_teacher",name:"Alle Lehrer"})}}},[e._v("Alle Lehrer")]),s("button",{staticClass:"btn chevron",class:e.isListActive("list-1"),on:{click:function(t){return e.clickHandlerRecipientsLehrer("list-1")}}},[e._v("Alle")]),s("button",{staticClass:"btn chevron",class:e.isListActive("list-2"),on:{click:function(t){return e.clickHandlerRecipientsFachschaft("list-2")}}},[e._v("Fachschaft")]),s("button",{staticClass:"btn chevron",class:e.isListActive("list-3"),on:{click:function(t){return e.clickHandlerKlassenteam("list-3")}}},[e._v("Klassenlehrer")]),s("button",{staticClass:"btn chevron",class:e.isListActive("list-4"),on:{click:function(t){return e.clickHandlerKlassenleitung("list-4")}}},[e._v("Klassenleitungen")])]),s("div",{directives:[{name:"show",rawName:"v-show",value:"tab-3"==e.recipientsTabOpen,expression:"recipientsTabOpen == 'tab-3'"}],staticClass:"tab flex scroll"},[s("button",{staticClass:"btn chevron",class:e.isListActive("list-1"),on:{click:function(t){return e.clickHandlerRecipientsSchueler("list-1")}}},[e._v("Alle")]),s("button",{staticClass:"btn chevron",class:e.isListActive("list-2"),on:{click:function(t){return e.clickHandlerRecipientsSchuelerOwnUnterricht("list-2")}}},[e._v("Aus dem eigenen Unterricht")])])]),s("div",{staticClass:"flex-1 flex border-r margin-r-xs height_35 scroll"},e._l(e.recipientsResult,(function(t,i){return s("button",{key:i,staticClass:"btn",class:e.isRecipientSelected(t),on:{click:function(s){return e.clickHandlerRecipientsSelect(t)}}},[e._v(e._s(t.text))])})),0),s("div",{staticClass:"flex-1 flex border-l scroll"},[e._l(e.recipientsSelect,(function(t,i){return s("button",{key:i,staticClass:"btn",class:e.isRecipientSelected(t),on:{click:function(s){return e.clickHandlerRecipientsSelect(t)}}},[e._v(e._s(t.name))])})),s("button",{staticClass:"btn btn-blau",on:{click:function(t){return e.clickCloseForm()}}},[e._v("OK")])],2)])},P=[],G=(s("7f7f"),s("bc3a").default),D={name:"FormRecipient",components:{},props:{type:String},data:function(){return{recipientsTabOpen:"tab-1",recipientsSelect:[],recipientsResult:[],recipientsListOpen:""}},computed:{},created:function(){},methods:{clickHandlerRecipientsTabOpen:function(e){this.recipientsTabOpen=e,this.recipientsListOpen=!1,this.recipientsResult=!1},clickHandlerRecipientsLehrer:function(e){var t=this;G.get("index.php?page=MessageCompose&action=getTeachersJSON&_type=query",{params:{}}).then((function(s){s.data.results&&(t.recipientsResult=s.data.results,t.recipientsListOpen=e)})).catch((function(e){console.log(e)}))},clickHandlerRecipientsFachschaft:function(e){this.recipientsResult=globals.selectOptionsFachschaften,this.recipientsListOpen=e},clickHandlerKlassenteam:function(e){this.recipientsResult=globals.selectOptionsKlassenteams,this.recipientsListOpen=e},clickHandlerKlassenleitung:function(e){this.recipientsResult=globals.selectOptionsKlassenleitung,this.recipientsListOpen=e},clickHandlerRecipientsSchueler:function(e){this.recipientsResult=globals.selectOptionsSchueler,this.recipientsListOpen=e},clickHandlerRecipientsSchuelerOwnUnterricht:function(e){this.recipientsResult=globals.selectOptionsSchuelerOwnUnterricht,this.recipientsListOpen=e},clickHandlerRecipientsSelect:function(e){if(!e.id&&!e.key)return!1;e.key&&(e.id=e.key,e.text=e.name);for(var t=!1,s=0,i=this.recipientsSelect.length;s<i;s++)this.recipientsSelect[s].key==e.id&&(t=this.recipientsSelect[s]);if(t){var n=this.recipientsSelect.indexOf(t);n>-1&&this.recipientsSelect.splice(n,1)}else this.recipientsSelect.push({key:e.id,name:e.text})},clickCloseForm:function(){for(var e="",t=0;t<this.recipientsSelect.length;t++)t>0&&(e+=";"),e+=this.recipientsSelect[t]["key"];EventBus.$emit("message--form--set-recipient",{type:this.type,recipientsString:e,recipientsArray:this.recipientsSelect})},isRecipientSelected:function(e){for(var t=0,s=this.recipientsSelect.length;t<s;t++)if(this.recipientsSelect[t].key==e.id||this.recipientsSelect[t].key==e.key)return"selected";return!1},isTabActive:function(e){return this.recipientsTabOpen==e&&"active"},isListActive:function(e){return this.recipientsListOpen==e&&"active"}}},I=D,V=Object(u["a"])(I,$,P,!1,null,"69e2c7c4",null),Q=V.exports,W=(s("bc3a").default,{name:"Form",components:{FormRecipient:Q},props:{},data:function(){return{messageText:"",messageSubject:"",openRecipients:!1,messageRecipientsArray:[],messageRecipients:"",openCcRecipients:!1,messageCcRecipientsArray:[],messageCcRecipients:"",openBccRecipients:!1,messageBccRecipientsArray:[],messageBccRecipients:""}},computed:{},created:function(){var e=this;EventBus.$on("message--form--set-recipient",(function(t){"recipients"==t.type?(e.messageRecipients=t.recipientsString,e.messageRecipientsArray=t.recipientsArray,e.openRecipients=!1):"ccrecipients"==t.type?(e.messageCcRecipients=t.recipientsString,e.messageCcRecipientsArray=t.recipientsArray,e.openCcRecipients=!1):"bccrecipients"==t.type&&(e.messageBccRecipients=t.recipientsString,e.messageBccRecipientsArray=t.recipientsArray,e.openBccRecipients=!1)}))},methods:{checkForm:function(e){e.preventDefault()},clickHandlerSubmitForm:function(){this.$refs.form.submit()},clickHandlerCloseForm:function(){EventBus.$emit("message--form--close",{})},clickHandlerClearForm:function(){this.messageText="",this.messageSubject="",this.openRecipients=!1,this.messageRecipientsArray=[],this.messageRecipients="",this.openCcRecipients=!1,this.messageCcRecipientsArray=[],this.messageCcRecipients="",this.openBccRecipients=!1,this.messageBccRecipientsArray=[],this.messageBccRecipients="",this.clickHandlerCloseForm()},clickHandlerRecipients:function(){this.openRecipients=!0},clickHandlerCcRecipients:function(){this.openCcRecipients=!0},clickHandlerBccRecipients:function(){this.openBccRecipients=!0}}}),U=W,q=Object(u["a"])(U,E,K,!1,null,"d412ab96",null),J=q.exports,z=!1;z=z||{userID:1608};var X=s("bc3a").default;X.defaults.headers.common["x-authorization"]="112233";var Y={name:"app",components:{Folders:d,Messages:R,Message:F,Bar:L,Form:J},data:function(){return{folders:{},messages:[],message:{},errorMsg:!1,show:{list:!0,preview:!1,form:!1}}},created:function(){var e=this,t=this;EventBus.$on("message--open",(function(e){var s="rest.php/GetMsgMessage/"+z.userID;e.message.id&&(s+="/"+parseInt(e.message.id)),t.ajaxGet(s,{},(function(e,t){t.message=e.data,t.show.list=!0,t.show.preview=!0,t.showform=!1}),(function(e){t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Message 404)"}))})),EventBus.$on("folders--get",(function(e){t.ajaxGet("rest.php/GetMsgFolders/"+z.userID,{},(function(e,t){t.folders=e.data}),(function(e){t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Folders 404)"})),t.ajaxGet("rest.php/GetMsgForm/"+z.userID,{},(function(e,t){console.log(e.data)}),(function(e){t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Folders 404)"}))})),EventBus.$on("messages--changeFolder",(function(e){var s="rest.php/GetMsgMessages/"+z.userID;e.folder.isStandardFolder&&!e.folder.folderID?s+="/"+e.folder.folderName:s+="/"+e.folder.folderID,t.ajaxGet(s,{},(function(e,t){e.data?(console.log(e.data),t.messages=e.data,t.message={},t.show.list=!0,t.show.preview=!1,t.showform=!1):t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Data)"}),(function(e){t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Change Folders 404)"}))})),EventBus.$on("message--form",(function(e){var s="rest.php/GetMsgForm/"+z.userID;t.ajaxGet(s,{},(function(e,t){e.data?(t.show.list=!1,t.show.preview=!1,t.show.form=!0,t.message={},console.log(e.data)):t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Form Data)"}),(function(e){t.errorMsg="Es ist leider ein Fehler aufgetreten. (Code:Ajax Open Form 404)"}))})),EventBus.$on("message--form--close",(function(t){console.log("close form"),e.show.list=!0,e.show.preview=!1,e.show.form=!1})),EventBus.$emit("messages--changeFolder",{folder:{isStandardFolder:!0,folderName:"Posteingang",folderID:0}})},methods:{ajaxGet:function(e,t,s,i,n){var r=this;X.get(e,{params:t}).then((function(e){s&&"function"===typeof s&&s(e,r)})).catch((function(e){e&&"function"===typeof i&&i(e)})).finally((function(){n&&"function"===typeof n&&n()}))}}},Z=Y,ee=Object(u["a"])(Z,n,r,!1,null,null,null),te=ee.exports;window.EventBus=new i["a"],i["a"].config.productionTip=!1,new i["a"]({render:function(e){return e(te)}}).$mount("#app")},acd9:function(e,t,s){}});
//# sourceMappingURL=app.js.map